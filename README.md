# micro_rest
[TOC]



## 前言

现在工作中基本上服务开发都被Spring Boot统治了。毫无疑问，SpringBoot整合的已经十分完善，需要的东西拿来就用，在我的工具箱里生产力无出其右者。虽然也看了一些相关的资料文档，但是仍然感觉SpringBoot朦朦胧胧，高度封装，简单易用，但是同时也隐去了许多原理性的环节。SpringBoot就像胶水，你需要的东西都能粘过来，但是这胶水量太大，不管什么组件，粘住以后都看不到本来面目了。

于是就想，能不能整一套薄一点的胶水，整合的时候，能保留各个组件原来的棱角。SpringBoot用起来就像吃饭，一桌菜一个味，虽然能快速吃饱，但是滋味儿欠缺了点。

再者封装太完善了，出了问题不容易定位，也不容易掌控更精准的内容，比如jar依赖太多了，难免有冲突。而且工作中也不止一次的遇到，由于jar依赖冲突导致的bug。所以才有了这个项目的最初动力。

菜端到一起，最美还是原汁原味。

## 原则

- 依赖最小化
- 最小封装
- 模块独立
- 组件功能专一
- 全部依赖开源

## 目标

- 适合微服务
- Restful
- TDD
- DDD
- 低冗余、高性能、高可控

## 技术选型

- [ ] JDK11
- [ ] JPA(Hibernate)
- [ ] Guice
- [ ] Resteasy
- [ ] Shiro
- [ ] Junit5
- [ ] Guava
- [ ] Slf4j/Log4j2
- [ ] JWT
- [ ] Jackson
- [ ] Redis
- [ ] Undertow
- [ ] Docker
- [ ] Gradle
- [ ] Disruptor

## 拓展整合

- [ ] Kafka
- [ ] Oauth2
- [ ] Nacos

## 模块划分

- [ ] rest/Rest服务
- [ ] auth/授权认证
- [ ] cache/缓存
- [ ] queue/消息队列
- [ ] sraf/服务发现

## 友情提示

此项目以技术探究和个人学习为出发点，本人目前没有，并且短时间应该也不会用于生产环境，生产环境请谨慎选用。

## 技术选型说明

### JPA(Hibernate)篇

目前来看，存储介质还是以SQL数据库为主，在Java开发中，SQL数据库交互，不论从设计还是使用上，目前Hibernate都是最好的。我无数次听人说起Hibernate的不足，说起Mybatis的好。甚至在面试的时候遇到候选人信誓旦旦的说，Hibernate太陈旧了，已经没有人使用了。

我身边也不乏抵触Hibernate的人，而且抵触最严重那位，在不得不使用Hibernate的时候，还要通过注解里面写SQL，既不使用自动生成，也不用JPQL/HQL，哪怕是最简单的增删改差。

我可以十分明确的说，凡是持有这种观点的人，都是十分无知，并且对于技术没有深层理解的。在持久化过程中，日常项目大概有80%左右的情况，Hibernate都可以十分高效的处理掉，不论是从开发速度，还是从运行速度上。

那些Hibernate的抵触情绪是从哪里来的呢？大概率来说，是使用过程中，遇到了各种问题，然而既不会读文档，又不会用Google，出现几次问题就炸了毛，恨不得刨了Hibernate的祖坟。

Hibernate的学习门槛很高，高到那些整天骂Hibernate的人，估计就算干到码农生涯结束都学不会。于是花2、3个小时就能“学会”的Mybatis，成了他们口中的圣器，凭此圣物就能把Hibernate打入18层地狱永世不得翻身。

为什么Hibernate的学习门槛这么高呢？因为Hibernate不仅仅是一堆Class和annotation。Hibernate是一种解决问题的高度优化的模式。那这个问题是什么呢？是关系型数据库和面向对象程序语言之间的鸿沟，是面向存储和面向运算思维方式之间的差异，是数据和过程的差异，这个差异，是不论选择什么框架，都必须面对的。为什么在解决这些问题的时候，Hibernate这么难学习呢？因为Hibernate针对这个问题的处理，设计了各种合理和优秀的模型，所有那些Class和annotation，都是为了实现这个方案而设计的。

几乎所有痛恨Hibernate的人，应该从来没有考虑过面向对象的优秀的设计是怎样的，他们不会考虑Domain，也不会考虑什么开闭原则，更不会讲优雅，一个对象一张表，最多再加几个List属性就行。在他们的代码里连Set都很少见。其实不用Mybatis，直接用JDBC他们也是很开心的，为什么？因为简单啊，路子野，想咋来就咋来，如果不是强制通过Sonar+Findbugs扫描，他们连Connection都不会关。

那个最痛恨Hibernate的人，用Mybatis写的代码照样奇烂无比。唯一不同的是Mybatis可以按野路子来，看着他自己用一堆XML配置出来的增删改查，洋洋自得。

于是他就被开除掉了，现在跟他交接的同学每天头痛无比。

如果不相信Hibernate有这么好，请认真阅读《JPWH》(2nd)至少三遍。为什么是三遍呢？因为我在读了这600多页的英文文档第三遍的时候，突然发现，居然有中文版……

JPWH是什么？这是个好问题……